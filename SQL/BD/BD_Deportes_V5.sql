--------------------------------------------------------
-- Archivo creado  - sábado-abril-24-2021
--------------------------------------------------------
DROP TABLE "COMPETICION" cascade constraints;
DROP TABLE "DEPORTE" cascade constraints;
DROP TABLE "DEPORTISTA" cascade constraints;
DROP TABLE "ETAPAVIDA" cascade constraints;
DROP TABLE "VICTORIA" cascade constraints;
--------------------------------------------------------
--  DDL for Table COMPETICION
--------------------------------------------------------

  CREATE TABLE "COMPETICION" 
   (	"COMPETICION_ID" NUMBER(*,0) GENERATED ALWAYS AS IDENTITY, 
	"NOMBRE" VARCHAR2(30)
   ) ;
--------------------------------------------------------
--  DDL for Table DEPORTE
--------------------------------------------------------

  CREATE TABLE "DEPORTE" 
   (	"DEPORTE_ID" NUMBER(*,0) GENERATED ALWAYS AS IDENTITY, 
	"NOMBRE" VARCHAR2(30), 
	"INDIVIDUAL" NUMBER(1,0)
   ) ;
--------------------------------------------------------
--  DDL for Table DEPORTISTA
--------------------------------------------------------

  CREATE TABLE "DEPORTISTA" 
   (	"DEPORTISTA_ID" NUMBER(*,0) GENERATED ALWAYS AS IDENTITY, 
	"NOMBRE_COMPLETO" VARCHAR2(30), 
	"EDAD" NUMBER(*,0), 
	"EMAIL" VARCHAR2(30), 
	"DEPORTE_ID" NUMBER(*,0), 
	"ENTRENADOR_ID" NUMBER(*,0)
   ) ;
--------------------------------------------------------
--  DDL for Table ETAPAVIDA
--------------------------------------------------------

  CREATE TABLE "ETAPAVIDA" 
   (	"ETAPA_ID" NUMBER(*,0) GENERATED ALWAYS AS IDENTITY, 
	"DESDE" NUMBER(*,0), 
	"HASTA" NUMBER(*,0), 
	"NOMBRE" VARCHAR2(30)
   ) ;
--------------------------------------------------------
--  DDL for Table VICTORIA
--------------------------------------------------------

  CREATE TABLE "VICTORIA" 
   (	"DEPORTISTA_ID" NUMBER(*,0), 
	"COMPETICION_ID" NUMBER(*,0), 
	"ANYO_VICTORIA" NUMBER(*,0)
   ) ;
REM INSERTING into COMPETICION
SET DEFINE OFF;

ALTER TABLE COMPETICION MODIFY COMPETICION_ID GENERATED BY DEFAULT AS IDENTITY;
    
Insert into COMPETICION (COMPETICION_ID,NOMBRE) values ('1','Roland Garros');
Insert into COMPETICION (COMPETICION_ID,NOMBRE) values ('2','LaLiga');

ALTER TABLE COMPETICION MODIFY COMPETICION_ID GENERATED ALWAYS AS IDENTITY (START WITH LIMIT VALUE);

  
REM INSERTING into DEPORTE
SET DEFINE OFF;

ALTER TABLE DEPORTE MODIFY DEPORTE_ID GENERATED BY DEFAULT AS IDENTITY;
    
Insert into DEPORTE (DEPORTE_ID,NOMBRE,INDIVIDUAL) values ('1','Tenis','1');
Insert into DEPORTE (DEPORTE_ID,NOMBRE,INDIVIDUAL) values ('2','Futbol','0');
Insert into DEPORTE (DEPORTE_ID,NOMBRE,INDIVIDUAL) values ('3','Baloncesto','0');

ALTER TABLE DEPORTE MODIFY DEPORTE_ID GENERATED ALWAYS AS IDENTITY (START WITH LIMIT VALUE);
    
REM INSERTING into DEPORTISTA
SET DEFINE OFF;

ALTER TABLE DEPORTISTA MODIFY DEPORTISTA_ID GENERATED BY DEFAULT AS IDENTITY;
    
Insert into DEPORTISTA (DEPORTISTA_ID,NOMBRE_COMPLETO,EDAD,EMAIL,DEPORTE_ID,ENTRENADOR_ID) values ('1','Rafael Nadal','35','rnadal@sport.com','1','6');
Insert into DEPORTISTA (DEPORTISTA_ID,NOMBRE_COMPLETO,EDAD,EMAIL,DEPORTE_ID,ENTRENADOR_ID) values ('2','Sergi Busquets','33','sbusquets@sport.com','2','5');
Insert into DEPORTISTA (DEPORTISTA_ID,NOMBRE_COMPLETO,EDAD,EMAIL,DEPORTE_ID,ENTRENADOR_ID) values ('3','Gerard Pique','34','gpique@sport.com','2','5');
Insert into DEPORTISTA (DEPORTISTA_ID,NOMBRE_COMPLETO,EDAD,EMAIL,DEPORTE_ID,ENTRENADOR_ID) values ('4','Ona Carbonell','31','ocarbonell@sport.com',null,null);
Insert into DEPORTISTA (DEPORTISTA_ID,NOMBRE_COMPLETO,EDAD,EMAIL,DEPORTE_ID,ENTRENADOR_ID) values ('5','Xavi Hernandez','41','xhernandez@sport.com','2',null);
Insert into DEPORTISTA (DEPORTISTA_ID,NOMBRE_COMPLETO,EDAD,EMAIL,DEPORTE_ID,ENTRENADOR_ID) values ('6','Carlos Moya','45','cmoya@sport.com','1',null);
Insert into DEPORTISTA (DEPORTISTA_ID,NOMBRE_COMPLETO,EDAD,EMAIL,DEPORTE_ID,ENTRENADOR_ID) values ('7','Marc Marquez','36','mmarquez@sport.com',null,null);

ALTER TABLE DEPORTISTA MODIFY DEPORTISTA_ID GENERATED ALWAYS AS IDENTITY (START WITH LIMIT VALUE);
    
REM INSERTING into ETAPAVIDA
SET DEFINE OFF;

ALTER TABLE ETAPAVIDA MODIFY ETAPA_ID GENERATED BY DEFAULT AS IDENTITY;
    
Insert into ETAPAVIDA (ETAPA_ID,DESDE,HASTA,NOMBRE) values ('1','0','10','Niño');
Insert into ETAPAVIDA (ETAPA_ID,DESDE,HASTA,NOMBRE) values ('2','10','18','Joven');
Insert into ETAPAVIDA (ETAPA_ID,DESDE,HASTA,NOMBRE) values ('3','18','40','Adulto');
Insert into ETAPAVIDA (ETAPA_ID,DESDE,HASTA,NOMBRE) values ('4','40','65','Mediana edad');
Insert into ETAPAVIDA (ETAPA_ID,DESDE,HASTA,NOMBRE) values ('5','65','120','Tercera edad');

ALTER TABLE ETAPAVIDA MODIFY ETAPA_ID GENERATED ALWAYS AS IDENTITY (START WITH LIMIT VALUE);
    
REM INSERTING into VICTORIA
SET DEFINE OFF;
Insert into VICTORIA (DEPORTISTA_ID,COMPETICION_ID,ANYO_VICTORIA) values ('1','1','2016');
Insert into VICTORIA (DEPORTISTA_ID,COMPETICION_ID,ANYO_VICTORIA) values ('2','2','2017');
Insert into VICTORIA (DEPORTISTA_ID,COMPETICION_ID,ANYO_VICTORIA) values ('3','2','2017');
--------------------------------------------------------
--  DDL for Index PK_COMPETICION
--------------------------------------------------------

  CREATE UNIQUE INDEX "PK_COMPETICION" ON "COMPETICION" ("COMPETICION_ID") 
  ;
--------------------------------------------------------
--  DDL for Index UQ_NOMBRE_COMPETICION
--------------------------------------------------------

  CREATE UNIQUE INDEX "UQ_NOMBRE_COMPETICION" ON "COMPETICION" ("NOMBRE") 
  ;
--------------------------------------------------------
--  DDL for Index PK_DEPORTE
--------------------------------------------------------

  CREATE UNIQUE INDEX "PK_DEPORTE" ON "DEPORTE" ("DEPORTE_ID") 
  ;
--------------------------------------------------------
--  DDL for Index UQ_NOMBRE_DEPORTE
--------------------------------------------------------

  CREATE UNIQUE INDEX "UQ_NOMBRE_DEPORTE" ON "DEPORTE" ("NOMBRE") 
  ;
--------------------------------------------------------
--  DDL for Index PK_DEPORTISTA
--------------------------------------------------------

  CREATE UNIQUE INDEX "PK_DEPORTISTA" ON "DEPORTISTA" ("DEPORTISTA_ID") 
  ;
--------------------------------------------------------
--  DDL for Index UQ_NOMBRE_DEPORTISTA
--------------------------------------------------------

  CREATE UNIQUE INDEX "UQ_NOMBRE_DEPORTISTA" ON "DEPORTISTA" ("NOMBRE_COMPLETO") 
  ;
--------------------------------------------------------
--  DDL for Index PK_ETAPAVIDA
--------------------------------------------------------

  CREATE UNIQUE INDEX "PK_ETAPAVIDA" ON "ETAPAVIDA" ("ETAPA_ID") 
  ;
--------------------------------------------------------
--  DDL for Index UQ_NOMBRE_ETAPA
--------------------------------------------------------

  CREATE UNIQUE INDEX "UQ_NOMBRE_ETAPA" ON "ETAPAVIDA" ("NOMBRE") 
  ;
--------------------------------------------------------
--  DDL for Index PK_VICTORIA
--------------------------------------------------------

  CREATE UNIQUE INDEX "PK_VICTORIA" ON "VICTORIA" ("DEPORTISTA_ID", "COMPETICION_ID","ANYO_VICTORIA") 
  ;
--------------------------------------------------------
--  Constraints for Table COMPETICION
--------------------------------------------------------

  ALTER TABLE "COMPETICION" ADD CONSTRAINT "PK_COMPETICION" PRIMARY KEY ("COMPETICION_ID")
  USING INDEX  ENABLE;
  ALTER TABLE "COMPETICION" ADD CONSTRAINT "UQ_NOMBRE_COMPETICION" UNIQUE ("NOMBRE")
  USING INDEX  ENABLE;
--------------------------------------------------------
--  Constraints for Table DEPORTE
--------------------------------------------------------

  ALTER TABLE "DEPORTE" ADD CONSTRAINT "PK_DEPORTE" PRIMARY KEY ("DEPORTE_ID")
  USING INDEX  ENABLE;
  ALTER TABLE "DEPORTE" ADD CONSTRAINT "UQ_NOMBRE_DEPORTE" UNIQUE ("NOMBRE")
  USING INDEX  ENABLE;
--------------------------------------------------------
--  Constraints for Table DEPORTISTA
--------------------------------------------------------

  ALTER TABLE "DEPORTISTA" ADD CONSTRAINT "PK_DEPORTISTA" PRIMARY KEY ("DEPORTISTA_ID")
  USING INDEX  ENABLE;
  ALTER TABLE "DEPORTISTA" ADD CONSTRAINT "UQ_NOMBRE_DEPORTISTA" UNIQUE ("NOMBRE_COMPLETO")
  USING INDEX  ENABLE;
--------------------------------------------------------
--  Constraints for Table ETAPAVIDA
--------------------------------------------------------

  ALTER TABLE "ETAPAVIDA" ADD CONSTRAINT "PK_ETAPAVIDA" PRIMARY KEY ("ETAPA_ID")
  USING INDEX  ENABLE;
  ALTER TABLE "ETAPAVIDA" ADD CONSTRAINT "UQ_NOMBRE_ETAPA" UNIQUE ("NOMBRE")
  USING INDEX ENABLE;
--------------------------------------------------------
--  Constraints for Table VICTORIA
--------------------------------------------------------

  ALTER TABLE "VICTORIA" ADD CONSTRAINT "PK_VICTORIA" PRIMARY KEY ("DEPORTISTA_ID", "COMPETICION_ID","ANYO_VICTORIA")
  USING INDEX  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table DEPORTISTA
--------------------------------------------------------

  ALTER TABLE "DEPORTISTA" ADD CONSTRAINT "FK_DEPORTISTA_DEPORTE" FOREIGN KEY ("DEPORTE_ID")
	  REFERENCES "DEPORTE" ("DEPORTE_ID") ON DELETE SET NULL ENABLE;
  ALTER TABLE "DEPORTISTA" ADD CONSTRAINT "FK_DEPORTISTA_DEPORTISTA" FOREIGN KEY ("ENTRENADOR_ID")
	  REFERENCES "DEPORTISTA" ("DEPORTISTA_ID") ON DELETE SET NULL ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table VICTORIA
--------------------------------------------------------

  ALTER TABLE "VICTORIA" ADD CONSTRAINT "FK_VICTORIA_COMPETICION" FOREIGN KEY ("COMPETICION_ID")
	  REFERENCES "COMPETICION" ("COMPETICION_ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "VICTORIA" ADD CONSTRAINT "FK_VICTORIA_DEPORTISTA" FOREIGN KEY ("DEPORTISTA_ID")
	  REFERENCES "DEPORTISTA" ("DEPORTISTA_ID") ENABLE;



